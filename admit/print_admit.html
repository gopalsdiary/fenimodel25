<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admit Card â€” Print</title>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link href="https://fonts.maateen.me/kalpurush/font.css" rel="stylesheet">
  <style>
    :root{ --bg:#f6f7f9; }
    *{ box-sizing:border-box }
    body{ margin:0; font-family:'Noto Sans Bengali','Hind Siliguri', system-ui, Arial, sans-serif; background:var(--bg); color:#111 }
    header{ position:sticky; top:0; background:#fff; border-bottom:1px solid #e5e7eb; z-index:10 }
    .container{ max-width:980px; margin:0 auto; padding:1rem }
    h1{ margin:.25rem 0; text-align:center; font-size:1.1rem }
  .card-wrap{ display:flex; justify-content:center; padding:1rem }
  /* Use full A4 size so background and overlays align exactly */
  .card{ position:relative; width:min(210mm, 95vw); height:297mm; background:#fff url('./admit.png') center no-repeat; background-size:100% 100%; border:1px solid #e5e7eb; box-shadow:0 10px 30px rgba(0,0,0,.08) }
    .t{ position:absolute; font-family:'Times New Roman', Times, serif; color:#111 }
    /* Positions tuned from list page */
    .t.name{ left:10mm; top:68mm; font-size:4.8mm; letter-spacing:.3mm; text-transform:uppercase }
    .t.class{ left:10mm; top:86mm; font-size:5mm }
    .t.section{ left:76mm; top:86mm; font-size:5mm; text-transform:uppercase }
    .t.roll{ left:10mm; top:102mm; font-size:5.5mm }
    .t.exam{ left:60mm; top:52mm; font-weight:700; font-size:4.6mm }
    .t.year{ left:138mm; top:52mm; font-weight:700; font-size:4.6mm }
    .t.iid{ left:78mm; top:122mm; font-size:4mm }
    .barcode{ position:absolute; left:70mm; bottom:7mm; width:60mm; height:16mm; display:flex; align-items:center; justify-content:center }
    .barcode svg{ width:100%; height:100% }
    .actions{ display:flex; gap:.5rem; justify-content:center; padding:1rem }
    .btn{ display:inline-flex; align-items:center; gap:.45rem; padding:.5rem .9rem; border:1px solid #d1d5db; border-radius:10px; background:#fff; cursor:pointer; font-weight:600 }
    .btn.primary{ background:#0ea5e9; border-color:#0284c7; color:#fff }
    @media print{ header,.actions{ display:none !important } body{ background:#fff } @page{ size:A4; margin:10mm } .card-wrap{ padding:0 } .card{ box-shadow:none; border:none } }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>
  <script>
    function q(n, d=''){ const v=new URLSearchParams(location.search).get(n); return v==null?d:v; }
    function text(el, v){ el.textContent = v==null? '': String(v); }
    function upper(s){ return String(s||'').toUpperCase(); }
    function setPos(selector, prop, qname){
      const v = q(qname, null); if(v===null || v==='') return;
      const el = document.querySelector(selector); if(!el) return;
      const num = Number(v); if(Number.isFinite(num)) el.style[prop] = num + 'mm';
    }
    function render(){
      const data = {
        exam: q('exam',''),
        year: q('year',''),
        name: q('name',''),
        father: q('father',''),
        cls: q('cls', q('class','')),
        section: q('section',''),
        roll: q('roll',''),
        iid: q('iid','')
      };
  document.querySelector('.t.exam').textContent = data.exam;
  document.querySelector('.t.year').textContent = data.year;
  document.querySelector('.t.name').textContent = upper(data.name);
  document.querySelector('.t.class').textContent = data.cls;
  document.querySelector('.t.section').textContent = upper(data.section);
  document.querySelector('.t.roll').textContent = data.roll;
  document.querySelector('.t.iid').textContent = data.iid ? `IID : ${data.iid}` : '';
  // Optional position overrides via query params (values in mm)
  setPos('.t.name','left','name_left'); setPos('.t.name','top','name_top');
  setPos('.t.class','left','class_left'); setPos('.t.class','top','class_top');
  setPos('.t.section','left','section_left'); setPos('.t.section','top','section_top');
  setPos('.t.roll','left','roll_left'); setPos('.t.roll','top','roll_top');
  setPos('.t.exam','left','exam_left'); setPos('.t.exam','top','exam_top');
  setPos('.t.year','left','year_left'); setPos('.t.year','top','year_top');
  setPos('.t.iid','left','iid_left'); setPos('.t.iid','top','iid_top');
  setPos('.barcode','left','barcode_left'); setPos('.barcode','bottom','barcode_bottom');
      const svg = document.getElementById('bar');
  try{ JsBarcode(svg, String(data.iid||data.roll||''), { format:'CODE128', displayValue:false, margin:0 }); }catch(_){ }
    }
    window.addEventListener('DOMContentLoaded', render);
  </script>
</head>
<body>
  <header>
    <div class="container"><h1>Admit Card Preview</h1></div>
  </header>
  <div class="card-wrap">
    <div class="card">
      <div class="t exam"></div>
      <div class="t year"></div>
      <div class="t name"></div>
      <div class="t class"></div>
      <div class="t section"></div>
      <div class="t roll"></div>
      <div class="t iid"></div>
      <svg id="bar" class="barcode" aria-hidden="true"></svg>
    </div>
  </div>
  <div class="actions">
    <button class="btn" onclick="window.print()">Print</button>
  </div>
</body>
</html>
