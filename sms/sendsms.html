<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SMS Portal</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 30px; }
        label { display: block; margin-top: 10px; }
        input, textarea { width: 300px; padding: 5px; }
        button { margin-top: 15px; padding: 8px 16px; }
        .result { margin-top: 20px; color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <h2>SMS পাঠানোর Portal</h2>
    <form id="smsForm">
        <label>Receiver Number (কমা দিয়ে একাধিক):</label>
        <input type="text" id="number" placeholder="88016xxxxxxxx,88019xxxxxxxx" required>

        <label>Sender ID:</label>
        <input type="text" id="senderid" value="8809617611082" required>

        <label>Message:</label>
        <textarea id="message" rows="4" required></textarea>

        <button type="submit">Send SMS</button>
    </form>

    <button id="checkBalance">Check Credit Balance</button>
    <div class="result" id="result"></div>

    <script>
        const apiKey = "VnIzbggbJpER8JkqAMyC";

        document.getElementById('smsForm').onsubmit = function(e) {
            e.preventDefault();
            const numbers = document.getElementById('number').value.split(',');
            const senderid = document.getElementById('senderid').value;
            const message = document.getElementById('message').value;

            let url = "";
            let data = {};

            if (numbers.length > 1) {
                url = "http://bulksmsbd.net/api/smsapimany";
                data = {
                    api_key: apiKey,
                    senderid: senderid,
                    messages: numbers.map(num => ({
                        to: num.trim(),
                        message: message
                    }))
                };
            } else {
                url = "http://bulksmsbd.net/api/smsapi";
                data = {
                    api_key: apiKey,
                    type: "text",
                    number: numbers[0].trim(),
                    senderid: senderid,
                    message: message
                };
            }

            fetch(url, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            })
            .then(res => res.json())
            .then(res => {
                document.getElementById('result').textContent = "SMS Sent! Response: " + JSON.stringify(res);
                document.getElementById('result').className = "result";
            })
            .catch(err => {
                document.getElementById('result').textContent = "Error: " + err;
                document.getElementById('result').className = "result error";
            });
        };

        document.getElementById('checkBalance').onclick = function() {
            fetch(`http://bulksmsbd.net/api/getBalanceApi?api_key=${apiKey}`)
            .then(res => res.json())
            .then(res => {
                document.getElementById('result').textContent = "Credit Balance: " + JSON.stringify(res);
                document.getElementById('result').className = "result";
            })
            .catch(err => {
                document.getElementById('result').textContent = "Error: " + err;
                document.getElementById('result').className = "result error";
            });
        };
    </script>
</body>
</html>
